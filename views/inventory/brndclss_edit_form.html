{{extend 'layout.html'}}
<div class="col-md-12">
        <div class="card card-underline">
            <div class="card-head">
                <ul class="nav nav-tabs pull-right" data-toggle="tabs">
                    <li class="active"><a href="#tab1">EDIT</a></li>                          
                    <li><a href="#" onclick=window.location="{{=URL('brndclss_mas')}}";>BROWSE</a></li>
                </ul>                
                <span class="card-title">Brand Classification</span>
            </div>
            <div class="card-body tab-content">
                {{=form.custom.begin}} 
                <div class="form-horizontal" role="form">                        
                        <div class="form-group">
                        <label class="col-sm-2 control-label">Brand Class Code</label>
                        <div class="col-sm-8"><input type="text" class="form-control" value="{{=ctr_val}}" readonly >
                        <p class="help-block">autogenerate</p>                            
                    </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Group Line Code</label>
                        <div class="col-sm-8">{{=form.custom.widget.group_line_id}}</div>                        
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Brand Line Code</label>
                        <div class="col-sm-8">{{=form.custom.widget.brand_line_code_id}}</div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Brand Class Name</label>
                        <div class="col-sm-8">{{=form.custom.widget.brand_cls_name}}</div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Status</label>
                        <div class="col-sm-8">{{=form.custom.widget.status_id}}</div>
                    </div>
                    <div class="form-group">         
                        <label class="col-sm-2 control-label"></label>               
                        <div class="col-sm-8">{{=form.custom.submit}}</div>
                    </div>                      
                </div>
                {{=form.custom.end}}  
                </div>            
        </div>        
</div>




<script src="{{=URL('static','js/cascade.js')}}"></script>

<script type="text/javascript">
$.noConflict();
    jQuery(function($) { 
      var data = [ {{for x in db().select(db.GroupLine.id, db.GroupLine.group_line_code, db.GroupLine.group_line_name):}}
        { text: '{{=x.group_line_code}} - {{=x.group_line_name}}', value: '{{=x.id}}', children: [ {{for y in db(db.Brand_Line.group_line_id == x.id).select(db.Brand_Line.brand_line_code, db.Brand_Line.brand_line_name, db.Brand_Line.id  ):}}
            { text:'{{=y.brand_line_code}} - {{=y.brand_line_name}}', value:'{{=y.id}}'}, {{pass}} ] }, {{pass}}   
      ];       
      $('#GroupLine_group_line_code_id').cascadingSelect({
        subSelects: ['#Brand_Classification_brand_line_code_id'],
        data: data
    });

    })();

  </script>

